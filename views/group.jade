extends structure/default.jade

block append scripts
    script(src="/scripts/dropzone.min.js")
    script(src="/scripts/group.js")
    script(src="/scripts/dropzoneCustom.js")

block append styles
    link(href="/styles/dropzone.min.css" rel="stylesheet")
    link(href="/styles/dropzoneCustom.css" rel="stylesheet")

block content
    .container
        #assignments
            h2= group.name
            h3.special Open Assignments
            if a_open.length > 0
                table.table.table-striped
                    thead
                        tr
                            th Assignment
                            th Level 
                            th.fixed240 Deadline 
                            th More Information
                            th.fixed180 Test or Submit
                            th Details
                    tbody
                        each project in a_open
                            tr
                                td= project.project.name
                                td= project.project.level
                                td.fixed240
                                    date(format="simple")= project.due
                                td 
                                    a(href=project.project.info) Link
                                td.fixed180
                                    a(href="javascript:Group.gradeProject('" + project.project._id + "', '" + project._id + "', '" + project.project.name + "', true)") Upload
                                td
                                    a(href="/results/" + group.id + "/" + project._id) View
            else 
                p There are no open assignments.
            h3.special.top40 Closed Assignments
            if a_close.length > 0
                table.table.table-striped
                    thead
                        tr
                            th Assignment
                            th Level 
                            th.fixed240 Due date 
                            th More Information
                            th.fixed180 Test
                            th Result
                    tbody
                        each project in a_close
                            tr
                                td= project.project.name
                                td= project.project.level
                                td.fixed240
                                    date(format="simple")= project.due
                                td 
                                    a(href=project.project.info) Link
                                td.fixed180
                                    a(href="javascript:Group.gradeProject('" + project.project._id + "', '" + project._id + "', '" + project.project.name + "', false)") Upload
                                td
                                    a(href="/results/" + group.id + "/" + project._id) View
            else
                p There are no closed assignments.
        #upload
            .row
                .col-md-3
                .col-md-6
                    h3.special
                        |Upload your 
                        span#mpname undefined 
                        |miniproject!
                    form.dropzone#zonemini(action="file-upload" method="post" enctype="multipart/form-data")
                        input.hide(type="file" name="miniproject")
                        .dz-message
                            |Drop miniproject here or click to upload.
                    #uploadButtons
                        button.btn.btn-info#switchProject(type="button") Switch assignment
                        button.btn.btn-success#submitResult(type="button") Submit best result
                        button.btn.btn-warning#clearAllFiles(type="button") Clear results
                    p#errMessage Please only use python files!
            #testResults
                hr
                h3.special Autograder results
                table.table.table-striped
                    thead
                        tr
                            th File name
                            th Total tests
                            th Succeeded Tests
                            th Failed Input
                    tbody#completedTests
        #studentInfo
            .row
                .col-sm-3
                    h3 Partners
                    .form-group
                        label(for="partners") Select all partners
                        select.form-control(name="partners" multiple="")#partners
                .col-sm-9
                    h3 Reflections
                    form#finalizeResults(action="sendResults" method="post")
                        #reflections
                            .form-group.reflection(student=user.email)
                                label(for=user.email) #{user.name} #{user.surename}
                                textarea.form-control(maxlength="500" rows="5" name=user.id placeholder="Please write a short reflection, max 500 characters...")
                        input#projectID.hide(type="text" name="project")
                        input#assignmentID.hide(type="text" name="assignment")
                        input#groupID.hide(type="text" name="group" value=group.id)
            hr
            #sendButtons
                button.btn.btn-info#cencelSubmit(type="button") Go back
                button.btn.btn-success#finalizeResult(type="button") Submit